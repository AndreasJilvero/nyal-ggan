var HH;!function(a){!function(){a.ObjectTracker.Env={version:"1.1.3",baseUrl:null,storageProxyUrl:null,apiHost:"realestate.bostadsboxen.bonniernews.se",callback:function(){a.ObjectTracker.Env.PropertyIsSet=!0}}}(a.ObjectTracker||(a.ObjectTracker={}));a.ObjectTracker}(HH||(HH={}));var HH;!function(a){var b;!function(a){var b=function(){function a(){}return a.getTrackedProperties=function(a){window[window._HHTrackerReference]("get","properties",function(b,c){b?a(b,null):c&&Array.isArray(c)?a(null,c):a(null,[])})},a.setProperty=function(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){var s={id:c,variant:d,lat:e,lng:f,address:g,city:h,price:i,fee:j,operatingcost:k,size:l,rooms:m,realEstateAgencyId:n,premarket:o,currency:p,realEstateOfficeId:q,timeStamp:(new Date).getTime()};a.getTrackedProperties(function(a,b){if(a)return void(r&&r(a,null));for(var c=b.length-1;c>=0;c--)if(b[c].id==s.id){b.splice(c,1);break}var d=b.push(s),e=10-d;if(0>e)for(e=Math.abs(e);e--;)b.shift();window[window._HHTrackerReference]("set","properties",JSON.stringify(b),function(a,b){a?r&&r(a,null):b?r&&r(null,s):r&&r("Failed to set property in store.",null)})})},a.getVisitorId=function(a){window[window._HHTrackerReference]("get","visitor",function(b,c){b&&a((new Date).getTime().toString()),a(c?c:(new Date).getTime().toString())})},a}();a.Storage=b}(b=a.Shared||(a.Shared={}))}(HH||(HH={}));var HH;!function(a){var b;!function(a){var b=function(){function a(){}return a.sendRequest=function(a,b,c){var d=b&&b.postData?b.postData:null,f=this.createXMLHTTPObject(),g=b&&!b.async?!1:!0;if(f){var h=d?"POST":"GET";if(void 0===f.withCredentials)try{f=new XMLHttpRequest,f.onload=function(){try{c(new e(200,f.responseText))}catch(a){c(new e(500,"Exception occured"))}},f.ontimeout=function(){c(new e(500,"Timeout"))},f.onerror=function(){c(new e(500,f.responseText))},f.open(h,a,g),f.send(d)}catch(i){c(new e(500,"Unhandled exception occured."))}else{if(f.open(h,a,g),f.setRequestHeader("accept","application/json"),b&&"[object Array]"===Object.prototype.toString.call(b.headers))for(var j=0;j<b.headers.length;j++)f.setRequestHeader(b.headers[j].key,b.headers[j].value);if(f.onreadystatechange=function(){4==f.readyState&&c(new e(f.status,f.response))},f.readyState&&4==f.readyState)return;f.send(d)}}},a.createXMLHTTPObject=function(){for(var a=!1,b=0;b<this.XMLHttpFactories.length;b++){try{a=this.XMLHttpFactories[b]()}catch(c){continue}break}return a},a.XMLHttpFactories=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],a}();a.Http=b;var c=function(){function a(a,b,c){void 0===c&&(c=!0),this.postData=a,this.headers=b,this.async=c}return a}();a.HttpOptions=c;var d=function(){function a(a,b){this.key=a,this.value=b}return a}();a.HttpHeader=d;var e=function(){function a(a,b){this.status=a,this.text=b}return a}();a.HttpResponse=e}(b=a.Shared||(a.Shared={}))}(HH||(HH={}));var HH;!function(a){var b;!function(b){var c;!function(b){var c=function(){function b(){try{this.getScriptElement()}catch(a){}}return b.prototype.run=function(b){try{var c=this.scriptElement;if(b||(b=c.getAttribute("data-property")),b){var d=JSON.parse(b);this.getProperty(d.id,d.system,function(b){b&&a.Shared.Storage.getVisitorId(function(c){a.Shared.Storage.setProperty(c,b.id,b.v,b.la,b.ln,b.ad,b.ci,b.p,b.f,b.oc,b.s,b.ro,b.aid,!1,b.c,void 0,a.ObjectTracker.Env.callback)})})}}catch(e){}},b.prototype.getProperty=function(b,c,d){var e="//"+a.ObjectTracker.Env.apiHost+"/api/legacy/properties/"+b+"/"+(c?c:"");try{a.Shared.Http.sendRequest(e,null,function(a){return a&&200==a.status?void d(JSON.parse(a.text)):void d(null)})}catch(f){}},b.prototype.getScriptElement=function(){this.scriptElement||(this.scriptElement=document.getElementById("hh.tracker"))},b}();b.Application=c}(c=b.ViewModels||(b.ViewModels={}))}(b=a.ObjectTracker||(a.ObjectTracker={}))}(HH||(HH={})),function(a,b,c,d,e){if(!a._HHTrackerReference){a._HHTrackerReference=e,a[e]=a[e]||function(){(a[e].q=a[e].q||[]).push(arguments)},a[e].l=+new Date;var f=b.createElement(c);f.type="text/javascript",f.async=!0,f.src=d;var g=b.getElementsByTagName(c)[0];g.parentNode.insertBefore(f,g)}}(window,document,"script","//cdn-tracker.bostadsboxen.bonniernews.se/tracking/hhtracker.js","hhtracker"),function(){var a=new HH.ObjectTracker.ViewModels.Application;a.run()}();